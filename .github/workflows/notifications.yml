name: Send Telegram message on PR
on:
  pull_request:
    types: [opened, reopened]

jobs:
  notify:
    runs-on: ubuntu-latest
    env:
      Message: |
        ðŸš€ PR created by ${{ github.actor }}:
        ${{ github.event.pull_request.title }}
        URL: ${{ github.event.pull_request.html_url }}
    steps:
      - name: Send PR notification to topic
        run: |
          curl -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_YANET_NOTIFICATIONS_BOT_TOKEN }}/sendMessage" \
          -d "chat_id=${{ vars.TELEGRAM_YANET_CHAT_ID }}" -d "message_thread_id=${{ vars.TELEGRAM_YANET_TOPIC_ID }}"   \
          -d "text=$Message"
