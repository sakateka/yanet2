@use '../../styles/variables' as *;
@use '../../styles/mixins' as *;

.summary-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: $spacing-lg;
}

.summary-card {
    @include flex-row($spacing-md);
    padding: $spacing-lg;
    border-radius: $radius-lg;
    background-color: var(--g-color-base-float);
    border: 1px solid var(--g-color-line-generic);
    transition: $transition-base;

    &:hover {
        border-color: var(--g-color-line-brand);
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    &__icon {
        @include flex-center;
        width: 40px;
        height: 40px;
        border-radius: $radius-md;
        flex-shrink: 0;
    }

    &__content {
        @include flex-column(2px);
        min-width: 0;
    }

    &__value {
        font-weight: $font-weight-bold;
        line-height: 1.2;
    }

    &__label {
        @include text-truncate;
    }

    &--default &__icon {
        background-color: var(--g-color-base-generic);
        color: var(--g-color-text-secondary);
    }

    &--info &__icon {
        background-color: var(--g-color-base-info-light);
        color: var(--g-color-text-info);
    }

    &--positive &__icon {
        background-color: var(--g-color-base-positive-light);
        color: var(--g-color-text-positive);
    }

    &--warning &__icon {
        background-color: var(--g-color-base-warning-light);
        color: var(--g-color-text-warning);
    }
}

.inspect-section {
    --section-accent: #6c7a89;

    @include flex-column;
    border: 1px solid var(--g-color-line-generic);
    border-left: 4px solid var(--section-accent);
    border-radius: $radius-lg;
    background-color: var(--g-color-base-background);
    overflow: hidden;

    &__header {
        @include flex-row($spacing-sm);
        justify-content: space-between;
        padding: $spacing-md $spacing-lg;
        background: linear-gradient(to right, rgba(0, 0, 0, 0.05), transparent);
        border-bottom: 1px solid var(--g-color-line-generic);

        &--clickable {
            cursor: pointer;
            transition: $transition-fast;

            &:hover {
                background: linear-gradient(to right, rgba(0, 0, 0, 0.08), rgba(0, 0, 0, 0.02));
            }
        }
    }

    &__title-group {
        @include flex-row($spacing-sm);
    }

    &__icon {
        @include flex-center;
        color: var(--section-accent);
    }

    &__title {
        font-weight: $font-weight-semibold;
    }

    &__count {
        margin-left: $spacing-xs;
    }

    &__toggle {
        flex-shrink: 0;
    }

    &__content {
        padding: $spacing-lg;
    }

    &--modules {
        --section-accent: #3b82f6;
    }

    &--devices {
        --section-accent: #f59e0b;
    }

    &--pipelines {
        --section-accent: #10b981;
    }

    &--functions {
        --section-accent: #8b5cf6;
    }

    &--configs {
        --section-accent: #ec4899;
    }

    &--agents {
        --section-accent: #06b6d4;
    }
}

.instance-card {
    @include flex-column($spacing-2xl);
    background-color: var(--g-color-base-background);

    &__grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: $spacing-2xl;

        @media (max-width: 1200px) {
            grid-template-columns: 1fr;
        }
    }
}

.module-card {
    @include flex-column;
    border: 1px solid var(--g-color-line-generic);
    border-radius: $radius-lg;
    padding: $spacing-md $spacing-lg;
    background-color: var(--g-color-base-float);
    width: 200px;
    transition: $transition-base;

    &:hover {
        border-color: var(--g-color-line-brand);
        background-color: var(--g-color-base-simple-hover);
    }

    &__content {
        @include flex-column($spacing-sm);
        flex: 1;
        min-height: 0;
    }

    &__header {
        @include flex-column($spacing-sm);
        min-height: 60px;
    }

    &__row {
        @include flex-row;
        align-items: flex-end;
        justify-content: space-between;
        width: 100%;
    }

    &__separator {
        flex: 1;
        border-bottom: 1px dotted var(--g-color-line-generic);
        margin: 0 $spacing-sm 2px $spacing-sm;
        height: 1px;
    }

    &__value {
        font-weight: $font-weight-bold;
    }

    &__name {
        font-weight: $font-weight-medium;
    }
}

.modules-grid {
    display: flex;
    flex-wrap: wrap;
    gap: $spacing-md;
    align-items: stretch;
}

.configs-table-wrapper {
    width: 100%;
    overflow-x: auto;
}

.devices-table-wrapper {
    width: 100%;
    overflow-x: auto;
}

.devices-table__name {
    font-weight: $font-weight-medium;
}

.devices-table__counter {
    @include flex-column(2px);
}

.pipelines-table-wrapper {
    width: 100%;
    overflow-x: auto;
}

.pipelines-table__name {
    font-weight: $font-weight-medium;
}

.pipelines-table__flow {
    @include flex-row($spacing-sm);
    flex-wrap: wrap;
    align-items: center;
}

.pipelines-table__arrow {
    flex-shrink: 0;
}

.functions-tree {
    @include flex-column($spacing-sm);
}

.functions-tree__function {
    border: 1px solid var(--g-color-line-generic);
    border-radius: $radius-md;
    background-color: var(--g-color-base-background);
    overflow: hidden;
}

.functions-tree__function-header {
    @include flex-row($spacing-sm);
    padding: $spacing-sm $spacing-md;

    &--clickable {
        cursor: pointer;
        transition: $transition-fast;

        &:hover {
            background-color: var(--g-color-base-simple-hover);
        }
    }
}

.functions-tree__chevron {
    flex-shrink: 0;
    color: var(--g-color-text-secondary);
}

.functions-tree__function-name {
    font-weight: $font-weight-medium;
    flex: 1;
}

.functions-tree__chains {
    @include flex-column($spacing-xs);
    padding: $spacing-sm $spacing-md $spacing-md;
    padding-left: $spacing-2xl;
    border-top: 1px solid var(--g-color-line-generic);
    background-color: var(--g-color-base-generic-ultralight);
}

.functions-tree__chain {
    @include flex-column($spacing-xs);
    padding: $spacing-sm $spacing-md;
    border: 1px solid var(--g-color-line-generic);
    border-radius: $radius-sm;
    background-color: var(--g-color-base-background);
}

.functions-tree__chain-header {
    @include flex-row($spacing-sm);
}

.functions-tree__chain-name {
    font-weight: $font-weight-medium;
}

.functions-tree__modules {
    @include flex-row($spacing-xs);
    flex-wrap: wrap;
    align-items: center;
}

.functions-tree__arrow {
    flex-shrink: 0;
}

.functions-tree__module-tag {
    flex-shrink: 0;
}

.inspect-page__content {
    width: 100%;
    flex: 1;
    min-width: 0;
    padding: $spacing-xl;
}

.inspect-page__no-data {
    display: block;
}

.agents-section__tabs {
    margin-bottom: $spacing-lg;
}

.inspect-text--block {
    display: block;
}
