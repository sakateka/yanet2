syntax = "proto3";

package ynpb;

option go_package = "github.com/yanet-platform/yanet2/controlplane/ynpb;ynpb";

service CountersService {
	// Inspect retrieves the current configuration state.
	rpc Device(DeviceCountersRequest) returns (CountersResponse) {
	}
	rpc Pipeline(PipelineCountersRequest) returns (CountersResponse) {
	}
	rpc Function(FunctionCountersRequest) returns (CountersResponse) {
	}
	rpc Chain(ChainCountersRequest) returns (CountersResponse) {
	}
	rpc Module(ModuleCountersRequest) returns (CountersResponse) {
	}
}

message DeviceCountersRequest {
	string device = 1;
}

message PipelineCountersRequest {
	string device = 1;
	string pipeline = 2;
}

message FunctionCountersRequest {
	string device = 1;
	string pipeline = 2;
	string function = 3;
}

message ChainCountersRequest {
	string device = 1;
	string pipeline = 2;
	string function = 3;
	string chain = 4;
}

message ModuleCountersRequest {
	string device = 1;
	string pipeline = 2;
	string function = 3;
	string chain = 4;
	string module_type = 5;
	string module_name = 6;
}

message CounterInstanceInfo {
	repeated uint64 values = 1;
}

message CounterInfo {
	string name = 1;
	repeated CounterInstanceInfo instances = 2;
}

message CountersResponse {
	repeated CounterInfo counters = 1;
}
